<mat-spinner *ngIf="loading"></mat-spinner>

<p *ngIf="error">{{error}}</p>

<div *ngIf="library">

  <div class="content" fxLayout="row" fxLayout.lt-sm="column" fxFlexFill>
    <div fxFlex="100" class="library-name">
      <h1 class="library-name-title">{{ library.name }}</h1>
      <h2 class="library-address">{{ library.address }}</h2>
    </div>
  </div>

  <div class="content" fxLayout="row" fxLayout.lt-sm="column" fxFlexFill>
    <div fxFlex="100" class="map-component">
      <app-map [library]="library"></app-map>
    </div>
  </div>

  <div class="content" fxLayout="row" fxLayout.lt-sm="column" fxFlexFill>
    <div fxFlex="50" class="calendar-component">
      <app-calendar
        [library]="library"
        (dayReservations)="dayReservations=$event"
        (selectedDate)="selectedDate=$event"
      ></app-calendar>
    </div>

    <div *ngIf="!authenticationService.isAdmin(); else adminBox" fxFlex="50" class="reservationComponent">
      <app-reservations-box
        
        [library]="library"
        [dayReservations]="dayReservations"
        [selectedDate]="selectedDate"
      ></app-reservations-box>
    </div>

    <ng-template #adminBox>
      <div fxFlex="50" class="reservation-component">
        <app-admin-reservations-box
        [library]="library"
        [dayReservations]="dayReservations"
        [selectedDate]="selectedDate"
        ></app-admin-reservations-box>
      </div>
    </ng-template>

  </div>

  
  <div *ngIf="authenticationService.isAdmin()" class="content" fxLayout="row" fxLayout.lt-sm="column" fxFlexFill>
    <div fxFlex="100" class="editCapacity-component">
    <mat-card>
      <mat-card-content>
        <h2>Modifica capacit√† biblioteca</h2>
        <p>Valore: {{sliderValue}}</p>
        <mat-slider
          [max]="200"
          [min]="10"
          [step]="1"
          [thumbLabel]="true"
          [tickInterval]="1"
          [(ngModel)]="sliderValue">
        </mat-slider>
        <button
          mat-raised-button color="primary"
          [disabled]="this.library.capacity == sliderValue"
          (click)="updateLibraryCapacity()"
        >
          Modifica
        </button>
      </mat-card-content>
    </mat-card>
    </div>
  </div>

  <div *ngIf="authenticationService.isAdmin()" class="delete-library-button">
  <button
      mat-raised-button color="warn"
      (click)="deleteLibrary(library.id)"
      [class.spinner]="isDeleting"
      [disabled]="isDeleting"
    >
      Elimina biblioteca
    </button>
  </div>

</div>
