<mat-spinner *ngIf="loading"></mat-spinner>

<p *ngIf="error">{{error}}</p>

<div *ngIf="library">

  <h2>{{ library.name }}</h2>

  <p>{{ library.name }}<br>{{ library.address }}</p>

  <app-map [library]="library"></app-map>

  <app-calendar
    [library]="library"
    (dayReservations)="dayReservations=$event"
    (selectedDate)="selectedDate=$event"
  ></app-calendar>

  <app-reservations-box
    *ngIf="!authenticationService.isAdmin(); else adminBox"
    [library]="library"
    [dayReservations]="dayReservations"
    [selectedDate]="selectedDate"
  ></app-reservations-box>

  <ng-template #adminBox>
    <app-admin-reservations-box
      [library]="library"
      [dayReservations]="dayReservations"
      [selectedDate]="selectedDate"
    ></app-admin-reservations-box>

    <mat-card>
      <mat-card-content>
        <h2>Modifica capacit√† biblioteca</h2>
        <p>Valore: {{sliderValue}}</p>
        <mat-slider
          [max]="200"
          [min]="10"
          [step]="1"
          [thumbLabel]="true"
          [tickInterval]="1"
          [(ngModel)]="sliderValue">
        </mat-slider>
        <button
          mat-raised-button color="primary"
          [disabled]="this.library.capacity == sliderValue"
          (click)="updateLibraryCapacity()"
        >
          Modifica
        </button>
      </mat-card-content>
    </mat-card>

    <button
      mat-raised-button color="warn"
      (click)="deleteLibrary(library.id)"
      [class.spinner]="isDeleting"
      [disabled]="isDeleting"
    >
      Elimina biblioteca
    </button>
  </ng-template>

</div>
